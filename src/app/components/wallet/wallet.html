<p-card header="Wallet Connection" styleClass="wallet-card">


    <div class="wallet-content">
        <div class="connection-status">
            <div class="status-indicator" [class.connected]="walletInfo()">
                <i
                        class="pi"
                        [class.pi-check-circle]="walletInfo()"
                        [class.pi-times-circle]="!walletInfo()"
                ></i>
                <span>{{ walletInfo() ? 'Connected' : 'Not Connected' }}</span>
            </div>
        </div>

        <p-divider></p-divider>

        <div class="wallet-actions">

            @if (walletInfo()) {
                <div class="action-group">
                    <label class="action-label">Disconnect Wallet</label>
                    <p-button
                            label="Disconnect"
                            icon="pi pi-power-off"
                            severity="danger"
                            (onClick)="disconnectWallet()"
                            styleClass="disconnect-btn"
                    >
                    </p-button>


                    @if (isWrongNetwork) {
                        <label class="action-label">Wrong network detected</label>
                        <p-button (click)="switchToHoodi()">Switch to Hoodi</p-button>
                    }
                </div>
            } @else {
                <div class="action-group">
                    <label class="action-label">Connect to MetaMask</label>
                    <p-button
                            label="Connect Wallet"
                            icon="pi pi-wallet"
                            severity="primary"
                            [disabled]="walletInfo()"
                            (onClick)="connectWallet()"
                            styleClass="connect-btn"
                    >
                    </p-button>
                </div>
            }
        </div>

        @if (walletInfo()) {
            <div class="wallet-info">
                <p-divider></p-divider>

                <div class="info-section">
                    <h4 class="info-title">Account Information</h4>
                    <img [src]="generate(walletInfo().address)" class="address-avatar"/>

                    <div class="info-item">
                        <label class="info-label">Address:</label>
                        <div class="address-display">
                            <span class="address-text">{{ walletInfo()?.address | formatAddress }}</span>
                        </div>

                        <label class="info-label">Network Name:</label>
                        <p-chip
                                [label]="walletInfo()?.networkName"
                                icon="pi pi-globe"
                                styleClass="network-chip">
                        </p-chip>

                        <label class="info-label">Chain Id:</label>
                        <p-chip
                                [label]="walletInfo()?.chainId.toString()"
                                icon="pi pi-globe"
                                styleClass="network-chip">
                        </p-chip>
                    </div>


                    @if (!isWrongNetwork) {
                        <app-assets (selectAsset)="selectAsset($event)"></app-assets>
                        <div class="info-item">
                            <label class="info-label">Balance:</label>
                            <div class="balance-display">

                                @if (walletService.selectedAsset()?.balance; as balance) {
                                    <span class="balance-amount">{{ balance }}</span>
                                }

                                @if (walletService.selectedAsset()?.symbol; as symbol) {
                                    <span class="balance-amount">{{ symbol }}</span>
                                }
                            </div>
                        </div>
                    }
                </div>
            </div>
        }

        @if (message()) {
            <div class="messages">
                <p-message
                        [severity]="messageType()"
                        [text]="message()"
                        styleClass="status-message"
                >
                </p-message>
            </div>
        }
    </div>
</p-card>
